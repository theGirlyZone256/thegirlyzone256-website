---
pagination:
  data: products
  size: 1
  alias: product
  addAllPagesToCollections: true
permalink: "product/{{ product.slug }}/"
layout: null
eleventyComputed:
  title: "{{ product.title }} | theGirlyZone Uganda"
  metaDescription: "{{ product.shortDescription }}"
---

<!DOCTYPE html>
<html lang="en">
<head>
     <!-- Google Analytics 4 for theGirlyZone Uganda -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WFG4EDT2DJ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-WFG4EDT2DJ');
        
        // Track product views
        document.addEventListener('DOMContentLoaded', function() {
            const productData = {{ product | json }};
            if (productData) {
                gtag('event', 'view_item', {
                    'items': [{
                        'item_id': productData.id,
                        'item_name': productData.title,
                        'price': productData.price,
                        'item_category': productData.category || 'clothing'
                    }]
                });
            }
            
            // Listen to cart events
            document.addEventListener('cartUpdated', function() {
                gtag('event', 'add_to_cart');
            });
            
            // Listen to favourites events
            document.addEventListener('favouritesUpdated', function() {
                gtag('event', 'add_to_wishlist');
            });
        });
    </script>
    <script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "Product",
  "name": "{{ product.title }}",
  "image": [
    "https://thegirlyzone.netlify.app/assets/images/main/{{ product.mainImages[0] }}"
   ],
  "description": "{{ product.shortDescription }}",
  "sku": "{{ product.id }}",
  "offers": {
    "@type": "Offer",
    "url": "https://thegirlyzone.netlify.app/product/{{ product.slug }}/",
    "priceCurrency": "UGX",
    "price": "{{ product.price }}",
    "availability": "https://schema.org/{% if product.availability %}InStock{% else %}OutOfStock{% endif %}",
    "itemCondition": "https://schema.org/NewCondition"
  }
}
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- ðŸŽ¯ FAVICON CONFIGURATION -->
    <link rel="icon" type="image/x-icon" href="/assets/images/favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-touch-icon.png">
    <link rel="manifest" href="/assets/images/favicon/site.webmanifest">
    
    <title>{{ product.title }} | theGirlyZone Uganda</title>
    <meta name="description" content="{{ product.shortDescription }}">
    
    <!-- ðŸŽ¯ SOCIAL SHARING META TAGS -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://thegirlyzone.netlify.app/product/{{ product.slug }}/">
    <meta property="og:title" content="{{ product.title }} | theGirlyZone Uganda">
    <meta property="og:description" content="{{ product.shortDescription }}">
    <meta property="og:image" content="https://thegirlyzone.netlify.app/assets/images/main/{{ product.mainImages[0] }}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="theGirlyZone Uganda">
    
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://thegirlyzone.netlify.app/product/{{ product.slug }}/">
    <meta property="twitter:title" content="{{ product.title }} | theGirlyZone Uganda">
    <meta property="twitter:description" content="{{ product.shortDescription }}">
    <meta property="twitter:image" content="https://thegirlyzone.netlify.app/assets/images/main/{{ product.mainImages[0] }}">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
@import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Pacifico&display=swap');
* { margin: 0; padding: 0; box-sizing: border-box; }
:root { --primary-color: #ff004d; --text-color: #000000; --background-color: #ffffff; --border-color: #e5e5e5; --success-color: #28a745; }
body { font-family: Arial, Helvetica, sans-serif; color: var(--text-color); background-color: var(--background-color); line-height: 1.6; min-height: 100vh; display: flex; flex-direction: column; }
.container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
.header { background: var(--background-color); border-bottom: 1px solid var(--border-color); padding: 1rem 0; position: sticky; top: 0; z-index: 1000; }
.header-content { display: flex; justify-content: space-between; align-items: center; }
.logo { font-size: 1.2rem; font-weight: bold; text-transform: uppercase; letter-spacing: 2px; }
.logo a { text-decoration: none; color: var(--text-color); }
.desktop-nav { display: none; align-items: center; gap: 1.5rem; }
.nav-icon { background: none; border: none; font-size: 1.2rem; cursor: pointer; color: var(--text-color); padding: 0.5rem; }
.mobile-bottom-nav { display: flex; position: fixed; bottom: 0; left: 0; width: 100%; background: white; border-top: 1px solid var(--border-color); padding: 0.75rem 0; justify-content: space-around; z-index: 999; }
.nav-item { display: flex; flex-direction: column; align-items: center; text-decoration: none; color: var(--text-color); font-size: 0.8rem; gap: 0.1rem; background: none; border: none; cursor: pointer; padding: 0 rem; flex: 1; transition: color 0.2s ease; position: relative; }
.nav-item i { font-size: 1.4rem; transition: transform 0.2s ease; }
.nav-item:active i { transform: scale(0.9); }
.nav-item:active { color: var(--primary-color); }
.product-details { padding: 2rem 0; min-height: 70vh; }
.product-content { display: block; }
.product-gallery { margin-bottom: 2rem; position: relative; }
.gallery-container { position: relative; aspect-ratio: 3/4; overflow: hidden; border-radius: 8px; }
.gallery-slides { display: flex; transition: transform 0.3s ease; height: 100%; }
.gallery-slide { min-width: 100%; height: 100%; position: relative; }
.gallery-slide img { width: 100%; height: 100%; object-fit: cover; }
.gallery-nav { display: flex; gap: 0.5rem; margin-top: 1rem; justify-content: center; flex-wrap: wrap; }
.gallery-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--border-color); border: none; cursor: pointer; transition: background-color 0.3s ease; }
.gallery-dot.active { background: var(--text-color); }
.gallery-arrow { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.8); border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; display: none; align-items: center; justify-content: center; font-size: 1.2rem; z-index: 10; }
.gallery-arrow.prev { left: 1rem; }
.gallery-arrow.next { right: 1rem; }
.product-info-details h1 { font-size: 1.8rem; margin-bottom: 1rem; text-transform: uppercase; }
.product-price-details { font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem; color: var(--text-color); }
.product-description { margin-bottom: 2rem; color: #666; line-height: 1.6; }
.color-selector { margin: 1.5rem 0; }
.color-selector h3 { margin-bottom: 1rem; font-size: 1rem; }
.color-options { display: flex; gap: 0.75rem; flex-wrap: wrap; }
.color-option { width: 40px; height: 40px; border: 2px solid var(--border-color); border-radius: 50%; cursor: pointer; position: relative; transition: border-color 0.3s ease; }
.color-option.active { border-color: var(--text-color); }
.color-option.active::after { content: "âœ“"; color: white; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 0.8rem; font-weight: bold; text-shadow: 0 0 2px rgba(0,0,0,0.5); }
.color-option.unavailable { opacity: 0.5; cursor: not-allowed; position: relative; }
.color-option.unavailable::before { content: ""; position: absolute; top: 50%; left: 0; right: 0; height: 2px; background: var(--primary-color); transform: rotate(-45deg); }



.add-to-favourites { background: white; border: 1px solid #ff004d; color: #ff004d; padding: 1.5rem 2rem; width: 100%; cursor: pointer; text-transform: uppercase; font-size: 1rem; transition: all 0.3s ease; }
.add-to-favourites:hover { background: white; color: #ff004d; border-color: #ff004d; }
.product-meta { margin-top: 2.5rem; padding-top: 2rem; border-top: 1px solid var(--border-color); }
.product-meta p { margin-bottom: 0.75rem; font-size: 0.9rem; }
.meta-label { font-weight: bold; display: inline-block; width: 100px; }
.recommendations-section { margin-top: 4rem; padding-top: 3rem; border-top: 1px solid var(--border-color); }
.recommendations-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-top: 2rem; }
.product-card { position: relative; border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden; transition: transform 0.3s ease; }
.product-card:hover { transform: translateY(-5px); }
.product-image { position: relative; aspect-ratio: 3/4; overflow: hidden; }
.product-image img { width: 100%; height: 100%; object-fit: cover; }
.favourite-btn { position: absolute; top: 1rem; right: 1rem; background: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; }
.product-info { padding: 1rem; }
.product-title { font-size: 0.8rem; margin-bottom: 0.5rem; text-transform: uppercase; font-weight: bold; }
.product-price { font-weight: 500; color: var(--text-color); }
.toast { position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%) translateY(100px); background: var(--text-color); color: var(--background-color); padding: 1rem 2rem; border-radius: 4px; z-index: 10000; opacity: 0; transition: all 0.3s ease; }
.toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
.toast.success { background: var(--success-color); }
.footer { background: var(--text-color); color: var(--background-color); padding: 3rem 0; margin-top: 4rem; }
.footer-content { display: grid; grid-template-columns: 1fr; gap: 2rem; }
@media (min-width: 768px) { .desktop-nav { display: flex; } .mobile-bottom-nav { display: none; } .product-content { display: grid; grid-template-columns: 1fr 1fr; gap: 4rem; align-items: start; } .gallery-arrow { display: flex; } .recommendations-grid { grid-template-columns: repeat(4, 1fr); } .footer-content { grid-template-columns: repeat(2, 1fr); } }
.header-logo { height: 40px !important; width: auto; object-fit: contain; display: block; }
.logo { display: flex; align-items: center; height: 100%; margin-left: 2px; }
.logo a { display: flex; align-items: center; height: 100%; text-decoration: none; }
@media (max-width: 767px) { .logo { margin-left: 3px !important; } }
.cart-count, .favourites-count { background: #25D366 !important; color: white !important; border-radius: 50% !important; width: 18px !important; height: 18px !important; font-size: 0.7rem !important; position: absolute !important; text-align: center !important; line-height: 18px !important; }
.favourites-count { background: #ff004d !important; }
.desktop-nav .favourites-count { top: -6px !important; right: 10px !important; }
.desktop-nav .cart-count { top: -6px !important; right: -5px !important; }
.mobile-bottom-nav .cart-count, .mobile-bottom-nav .favourites-count { top: -6px !important; right: 15px !important; }
.desktop-nav .nav-icon { font-size: 1.5rem !important; }
.mobile-bottom-nav .cart-count, .mobile-bottom-nav .favourites-count { top: -6px !important; right: 15px !important; }
.mobile-bottom-nav .nav-item { position: relative !important; }
.mobile-bottom-nav .favourites-count { top: -6px !important; right: 15px !important; }
.mobile-bottom-nav .cart-count { top: -6px !important; right: 15px !important; }
.footer { background: #1f1f1f; color: var(--background-color); padding: 3rem 0 5rem; margin-top: auto; width: 100%; text-align: center; }
.slogan-section { margin-bottom: 2rem; }
.company-slogan { font-family: 'Pacifico', cursive; font-size: 1.3rem; color: white; margin: 0; text-align: center; }
.footer-divider { height: 1px; background: rgba(255, 255, 255, 0.2); width: 80%; max-width: 400px; margin: 0 auto 2rem auto; }
.copyright-section { text-align: center; }
.copyright-text { font-size: 0.8rem; opacity: 0.7; margin: 0; line-height: 1.5; text-align: center; }
.copyright-text strong { font-weight: bold; }
body, h1, h2, h3, h4, h5, h6, p, span, div, a, button, input, textarea, select, label, li, td, th { font-family: 'Montserrat', sans-serif; }
h1, h2, h3, h4, h5, h6 { font-weight: 600; }
body, p, span, div { font-weight: 400; }
strong, b, .bold { font-weight: 700; }
.product-title, .product-price, .favourite-item-title, .cart-item-title { font-weight: 500; }
button, .btn, .action-btn, .submit-btn, .checkout-btn, .add-to-cart-btn { font-weight: 600; letter-spacing: 0.5px; }
.nav-item, .desktop-nav, .mobile-bottom-nav { font-weight: 500; }
.company-slogan { font-family: 'Pacifico', cursive !important; font-weight: 400; }
.nav-icon, .nav-item, .favourite-btn, .color-option, .gallery-arrow, .share-btn, .filter-option, .action-btn, .add-to-cart-btn, .add-to-cart, .add-to-favourites, .remove-favourite-btn, .remove-btn, .checkout-btn, .submit-btn, .social-icon { -webkit-tap-highlight-color: transparent !important; -webkit-touch-callout: none !important; -webkit-user-select: none !important; -moz-user-select: none !important; -ms-user-select: none !important; user-select: none !important; outline: none !important; }
.nav-icon:active, .nav-item:active, .favourite-btn:active, .color-option:active { transform: scale(0.95); transition: transform 0.1s ease; }
.nav-icon:focus-visible, .nav-item:focus-visible, .favourite-btn:focus-visible { outline: 2px solid #000 !important; outline-offset: 2px; }
html { scroll-behavior: smooth; }
.product-gallery { scroll-margin-top: 100px; }
@media (max-width: 767px) { .product-gallery { scroll-margin-top: 80px; } }
.gallery-slides.single-image-mode { display: flex; transform: none !important; cursor: grab; }
.gallery-slides.single-image-mode:active { cursor: grabbing; }
.gallery-slides.single-image-mode .gallery-slide { min-width: 100%; user-select: none; -webkit-user-select: none; -webkit-touch-callout: none; }
.gallery-container { overflow: hidden; -webkit-overflow-scrolling: touch; }
.gallery-slides.single-image-mode .gallery-slide img { width: 100%; height: 100%; object-fit: cover; pointer-events: none; }
.gallery-container { -webkit-overflow-scrolling: touch; overflow: hidden; position: relative; }
.gallery-slides.single-image-mode { overflow-x: hidden; overflow-y: auto; height: 100%; }
.gallery-slides.single-image-mode .gallery-slide { touch-action: pan-y; }
.view-all-btn { width: 80px; height: 40px; background: #000000 !important; border: 2px solid transparent; border-radius: 8px; cursor: pointer; font-size: 0.7rem; font-weight: 700; color: white !important; text-transform: uppercase; letter-spacing: 0.5px; position: relative; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; background: linear-gradient(black, black) padding-box, linear-gradient(45deg, #ff004d, #ff6b00, #ffd900, #25D366, #0099ff, #a200ff, #ff004d) border-box; background-size: 200% 200%; animation: spectrumGlow 3s linear infinite; }
.view-all-btn:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(255, 0, 77, 0.3); }
.view-all-btn:active { transform: scale(0.95); }
@keyframes spectrumGlow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
.view-all-btn, .view-all-btn:hover, .view-all-btn:active { color: white !important; }
@media (max-width: 767px) { .view-all-btn { width: 70px; height: 36px; font-size: 0.65rem; } }
.color-options { display: flex; gap: 0.75rem; flex-wrap: wrap; align-items: center; }
.header-logo, .logo-image, .designer-logo-image, .product-image img, .gallery-slide img, .favourite-item-image img, .cart-item-image img, .recommendations-grid img { -webkit-tap-highlight-color: transparent !important; -webkit-touch-callout: none !important; -webkit-user-select: none !important; -moz-user-select: none !important; -ms-user-select: none !important; user-select: none !important; outline: none !important; border: none !important; }
.header-logo:focus, .logo-image:focus, .designer-logo-image:focus, .product-image img:focus, .gallery-slide img:focus { outline: none !important; box-shadow: none !important; }
a img { border: none !important; outline: none !important; }
a:has(img) { -webkit-tap-highlight-color: transparent !important; }
.product-card a:focus, .product-card img:focus { outline: none !important; }
.desktop-nav { display: none; align-items: center; gap: 1.5rem; }
.desktop-nav .nav-item { display: flex; flex-direction: column; align-items: center; text-decoration: none; color: var(--text-color); font-size: 0.8rem; gap: 0.2rem; background: none; border: none; cursor: pointer; padding: 0.5rem; transition: color 0.2s ease; position: relative; }
.desktop-nav .nav-item i { font-size: 1.4rem; transition: transform 0.2s ease; }
.desktop-nav .nav-item:active i { transform: scale(0.9); }
.desktop-nav .nav-item:active { color: var(--primary-color); }
@media (min-width: 768px) { .desktop-nav { display: flex; } }
.share-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); display: flex; align-items: center; justify-content: center; z-index: 10000; padding: 20px; opacity: 0; transition: opacity 0.2s ease; }
.share-modal-overlay.active { opacity: 1; }
.share-modal-content { background: white; border-radius: 16px; padding: 2rem; max-width: 400px; width: 100%; box-shadow: 0 20px 40px rgba(0,0,0,0.2); transform: translateY(-20px) scale(0.95); opacity: 0; transition: all 0.3s ease-out; }
.share-modal-overlay.active .share-modal-content { transform: translateY(0) scale(1); opacity: 1; }
.share-platforms { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 2rem; }
.share-platform-btn { border: none; border-radius: 12px; padding: 1rem; color: white; cursor: pointer; transition: all 0.3s ease; display: flex; flex-direction: column; align-items: center; gap: 0.5rem; font-weight: 500; font-family: 'Montserrat', sans-serif; }
.share-platform-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.2); }
.share-platform-btn:active { transform: translateY(0); }
.whatsapp-btn { background: #25D366; }
.facebook-btn { background: #1877F2; }
.twitter-btn { background: #1DA1F2; }
.email-btn { background: #FF004D; }
.copy-link-btn { background: #000; border: none; border-radius: 8px; padding: 0.75rem 1.5rem; color: white; cursor: pointer; font-weight: 600; width: 100%; transition: all 0.3s ease; font-family: 'Montserrat', sans-serif; }
.copy-link-btn:hover { background: #333; transform: translateY(-1px); }
.close-modal-btn { background: none; border: 1px solid #e5e5e5; border-radius: 8px; padding: 0.75rem 1.5rem; color: #666; cursor: pointer; font-weight: 500; width: 100%; transition: all 0.3s ease; font-family: 'Montserrat', sans-serif; }
.close-modal-btn:hover { background: #f8f9fa; border-color: #ccc; }
.share-btn { background: none; border: none; cursor: pointer; }
.share-btn:active i { transform: scale(0.9); }
.share-btn:active { color: var(--primary-color); }
@media (max-width: 767px) { .share-btn { position: fixed !important; right: 15px !important; top: 19px !important; z-index: 1001 !important; background: rgba(255,255,255,0.95) !important; backdrop-filter: blur(10px) !important; border: none !important; padding: 15px !important; border-radius: 50% !important; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15), 0 2px 10px rgba(0, 0, 0, 0.1) !important; transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important; } .share-btn:hover { transform: translateY(-3px) !important; box-shadow: 0 12px 40px rgba(0,0,0,0.25), 0 4px 20px rgba(0,0,0,0.15) !important; background: rgba(255,255,255,0.98) !important; } .share-btn:active { transform: translateY(-1px) !important; box-shadow: 0 6px 25px rgba(0,0,0,0.2), 0 2px 12px rgba(0,0,0,0.1) !important; } }
.gallery-slides.single-image-mode { display: flex !important; transform: none !important; cursor: default !important; overflow: hidden !important; height: 100% !important; }
.gallery-slides.single-image-mode .gallery-slide { min-width: 100% !important; user-select: none !important; -webkit-user-select: none !important; -webkit-touch-callout: none !important; }
.gallery-slides.single-image-mode .gallery-slide img { width: 100% !important; height: 100% !important; object-fit: cover !important; }
.gallery-container.single-image-mode { touch-action: pan-y !important; pointer-events: none !important; }
.gallery-container.single-image-mode img { pointer-events: auto !important; display: block !important; visibility: visible !important; }
.gallery-slides:not(.single-image-mode) { cursor: grab !important; pointer-events: auto !important; }
.gallery-slides:not(.single-image-mode):active { cursor: grabbing !important; }
.gallery-slides:not(.single-image-mode) .gallery-slide { touch-action: pan-y pinch-zoom !important; }
.gallery-container:not(.single-image-mode) { -webkit-overflow-scrolling: touch !important; overflow: hidden !important; pointer-events: auto !important; }
.color-option.single-color { cursor: default !important; opacity: 1 !important; border-color: var(--text-color) !important; }
.color-option.single-color::after { content: none !important; }
.color-option.single-color:hover { transform: none !important; border-color: var(--text-color) !important; } 
/* ðŸŽ¯ BUY NOW & ADD TO CART BUTTON LAYOUT */
.product-actions-grid {
    display: flex;
    gap: 0.75rem;
    margin: 2.5rem 0;
}

.buy-now-container {
    flex: 7; /* 70% width */
}

.add-to-cart-container {
    flex: 3; /* 30% width */
}

/* ðŸŽ¯ GOLDEN SHIMMER BUTTON - ENHANCED VERSION */
.buy-now-btn {
    background: linear-gradient(135deg, 
        #FFD700 0%, 
        #FFEC8B 15%, 
        #FFD700 30%, 
        #FFF380 45%, 
        #FFD700 60%, 
        #FFEC8B 75%, 
        #FFD700 90%, 
        #FFF380 100%);
    background-size: 400% 400%;
    color: #000 !important;
    border: none;
    padding: 1.5rem 2rem;
    width: 100%;
    cursor: pointer;
    text-transform: uppercase;
    font-weight: 800;
    font-size: 1.1rem;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    border-radius: 50px;
    letter-spacing: 1.5px;
    box-shadow: 0 50px 25px rgba(255, 215, 0, 0.5),
                0 0 0 1px rgba(255, 215, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
    animation: shimmer 2.5s infinite linear;
    text-shadow: 0 1px 1px rgba(255, 255, 255, 0.3);
}

/* Add a bright shine overlay */
.buy-now-btn::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.8) 50%,
        rgba(255, 255, 255, 0) 100%
    );
    transform: rotate(30deg);
    animation: shine 3s infinite linear;
}

@keyframes shimmer {
    0% {
        background-position: 0% 50%;
        box-shadow: 0 6px 25px rgba(255, 215, 0, 0.5),
                    0 0 0 1px rgba(255, 215, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.6);
    }
    50% {
        background-position: 100% 50%;
        box-shadow: 0 6px 30px rgba(255, 215, 0, 0.8),
                    0 0 0 1px rgba(255, 215, 0, 0.5),
                    inset 0 1px 0 rgba(255, 255, 255, 0.8);
    }
    100% {
        background-position: 0% 50%;
        box-shadow: 0 6px 25px rgba(255, 215, 0, 0.5),
                    0 0 0 1px rgba(255, 215, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.6);
    }
}

@keyframes shine {
    0% {
        left: -50%;
    }
    100% {
        left: 150%;
    }
}

.buy-now-btn:hover {
    animation: shimmer 1s infinite linear;
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(255, 215, 0, 0.7),
                0 0 0 1px rgba(255, 215, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

.buy-now-btn:active {
    transform: translateY(0);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4),
                0 0 0 1px rgba(255, 215, 0, 0.3);
    animation: shimmer 0.5s infinite linear;
}

.buy-now-btn:disabled {
    background: #ccc;
    cursor: not-allowed;
    animation: none;
    box-shadow: none;
    transform: none;
}

.buy-now-btn:disabled::before {
    display: none;
}

.buy-now-btn i {
    margin-right: 10px;
    text-shadow: 0 1px 2px rgba(255, 215, 0, 0.5);
}

/* ðŸŽ¯ CART BUTTON - Black by default, Green when in cart */
.add-to-cart-btn {
    background: #000000 !important; /* Black by default */
    color: white !important;
    border: none;
    padding: 1.5rem 0;
    width: 100%;
    cursor: pointer;
    border-radius: 50px;
    font-weight: bold;
    font-size: 1.4rem;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    min-height: 60px;
}

.add-to-cart-btn:hover {
    background: #333333 !important; /* Darker gray on hover */
}

.add-to-cart-btn:active {
    transform: scale(0.95);
}

.add-to-cart-btn:disabled {
    background: #ccc !important;
    cursor: not-allowed;
    transform: none;
}

/* Special class for when item is in cart */
.add-to-cart-btn.in-cart {
    background: #25D366 !important; /* Green when in cart */
}

.add-to-cart-btn.in-cart:hover {
    background: #128C7E !important;
}

/* ðŸŽ¯ FAVOURITES BUTTON ADJUSTMENT */
.add-to-favourites {
    margin-top: 1rem;
    background: white;
    border: none;
    color: #ff004d;
    padding: 1.5rem 2rem;
    width: 100%;
    cursor: pointer;
    text-transform: uppercase;
    font-size: 1rem;
    transition: all 0.3s ease;
}

.add-to-favourites:hover {
    background: #fff0f3;
    border-color: #ff004d;
}


/* ðŸŽ¯ MOBILE SCROLL HELPER - Non-destructive notification */
@media (max-width: 767px) {
    .mobile-scroll-helper {
        position: fixed;
        bottom: 80px;
        right: 15px;
        width: 44px;
        height: 44px;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 50%;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15),
                    0 2px 8px rgba(0, 0, 0, 0.1),
                    inset 0 1px 0 rgba(255, 255, 255, 0.5);
        cursor: pointer;
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        opacity: 1;
        transform: translateY(0) scale(1);
        border: 1px solid rgba(212, 175, 55, 0.3);
    }
    
    /* Pulse animation to attract attention */
    .mobile-scroll-helper::before {
        content: '';
        position: absolute;
        top: -6px;
        left: -6px;
        right: -6px;
        bottom: -6px;
        border-radius: 50%;
        border: 2px solid rgba(212, 175, 55, 0.4);
        animation: helperPulse 3s infinite ease-in-out;
        z-index: -1;
    }
    
    @keyframes helperPulse {
        0%, 100% {
            transform: scale(1);
            opacity: 0.5;
        }
        50% {
            transform: scale(1.1);
            opacity: 0.8;
        }
    }
    
    /* Arrow icon */
    .mobile-scroll-helper i {
        color: #D4AF37;
        font-size: 1.2rem;
        font-weight: bold;
        transition: transform 0.3s ease;
        text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
    }
    
    /* Close button inside */
    .mobile-scroll-helper .close-helper {
        position: absolute;
        top: -8px;
        right: -8px;
        width: 22px;
        height: 22px;
        background: #ff004d;
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
        font-weight: bold;
        box-shadow: 0 2px 6px rgba(255, 0, 77, 0.3);
        opacity: 0;
        transform: scale(0);
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    
    /* Show close button on hover */
    .mobile-scroll-helper:hover .close-helper {
        opacity: 1;
        transform: scale(1);
    }
    
    /* Hover effect for main button */
    .mobile-scroll-helper:hover {
        transform: translateY(-2px) scale(1.05);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2),
                    0 3px 10px rgba(0, 0, 0, 0.15);
        border-color: rgba(212, 175, 55, 0.5);
    }
    
    /* Active state */
    .mobile-scroll-helper:active {
        transform: translateY(0) scale(0.95);
        transition: all 0.1s ease;
    }
    
    /* Hide state */
    .mobile-scroll-helper.hidden {
        opacity: 0;
        transform: translateY(20px) scale(0.8);
        pointer-events: none;
    }
    
    /* Show state */
    .mobile-scroll-helper.visible {
        opacity: 1;
        transform: translateY(0) scale(1);
        pointer-events: auto;
    }
}

/* ðŸŽ¯ OPTIONAL TOOLTIP FOR MOBILE SCROLL HELPER */
@media (max-width: 767px) {
    .mobile-scroll-helper::after {
        content: 'Scroll for details';
        position: absolute;
        right: 60px;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(0, 0, 0, 0.85);
        color: white;
        padding: 8px 12px;
        border-radius: 8px;
        font-size: 0.75rem;
        font-weight: 500;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        z-index: 10000;
    }
    
    .mobile-scroll-helper::after::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 100%;
        transform: translateY(-50%);
        border-width: 6px;
        border-style: solid;
        border-color: transparent transparent transparent rgba(0, 0, 0, 0.85);
    }
    
    .mobile-scroll-helper:hover::after {
        opacity: 1;
        transition-delay: 0.2s;
    }
}



/* ðŸŽ¯ FAVOURITES ANIMATIONS - Joy & Sadness (NO EMOJIS) */
.favourites-animation-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 99999;
    overflow: hidden;
}

/* ðŸ’– JOY ANIMATION - Floating Font Awesome hearts */
.heart-joy {
    position: absolute;
    color: #ff004d;
    font-size: 1.5rem;
    animation: floatUp 2.5s ease-out forwards;
    text-shadow: 0 0 10px rgba(255, 0, 77, 0.5);
    z-index: 100000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.heart-joy i {
    display: block;
}

@keyframes floatUp {
    0% {
        transform: translateY(0) scale(0.8);
        opacity: 1;
    }
    70% {
        opacity: 0.8;
    }
    100% {
        transform: translateY(-150px) scale(1.5);
        opacity: 0;
    }
}

/* Different heart sizes for variety */
.heart-joy.large i {
    font-size: 2.2rem;
}
.heart-joy.small i {
    font-size: 1rem;
}
.heart-joy.tiny i {
    font-size: 0.7rem;
}

/* ðŸ’” SADNESS ANIMATION - One beat, then grey and fade */
.sadness-container {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: none;
    z-index: 99999;
    animation: sadnessFade 1.5s ease-out forwards;
}

.heart-sad {
    font-size: 5rem;
    color: #999999;  /* Start grey */
    animation: oneBeat 0.4s ease-in-out;
}

@keyframes oneBeat {
    0% {
        transform: scale(1);
        color: #999999;
    }
    50% {
        transform: scale(1.3);
        color: #cccccc;  /* Lighter grey on beat */
    }
    100% {
        transform: scale(1);
        color: #999999;
    }
}

@keyframes sadnessFade {
    0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8);
    }
}

/* ðŸŽ¯ FAVOURITES BUTTON CLICK ANIMATION */
.add-to-favourites:active {
    transform: scale(0.97);
    transition: transform 0.1s ease;
}

@keyframes heartPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.3); }
    100% { transform: scale(1); }
}

.add-to-favourites i {
    transition: all 0.2s ease;
}

.add-to-favourites:active i {
    animation: heartPulse 0.3s ease;
}



/* ðŸ›’ CART ANIMATION - Jump & Dash */
.cart-animation-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 100000;
    overflow: hidden;
}

.cart-flyer {
    position: absolute;
    color: #000000;
    font-size: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    filter: drop-shadow(0 5px 15px rgba(0,0,0,0.2));
    animation: cartJumpDash 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.98) forwards;
    z-index: 100001;
}

.cart-flyer i {
    display: block;
}

/* Shopping bag with plus for "added" */
.cart-flyer.added i {
    color: #25D366; /* WhatsApp green when added */
}

/* Jump up then dash right */
@keyframes cartJumpDash {
    0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
    }
    20% {
        transform: translate(0, -60px) scale(1.2); /* Jump up */
        opacity: 1;
    }
    40% {
        transform: translate(30px, -80px) scale(1.1); /* Start moving right */
        opacity: 1;
    }
    60% {
        transform: translate(100px, -60px) scale(0.9); /* Mid-flight */
        opacity: 0.9;
    }
    80% {
        transform: translate(200px, -30px) scale(0.7); /* Getting smaller */
        opacity: 0.7;
    }
    100% {
        transform: translate(300px, 0) scale(0.4); /* Dash off right */
        opacity: 0;
    }
}

/* Desktop - dash further */
@media (min-width: 768px) {
    @keyframes cartJumpDash {
        0% {
            transform: translate(0, 0) scale(1);
            opacity: 1;
        }
        20% {
            transform: translate(0, -80px) scale(1.3);
            opacity: 1;
        }
        40% {
            transform: translate(80px, -100px) scale(1.2);
            opacity: 1;
        }
        60% {
            transform: translate(250px, -70px) scale(0.9);
            opacity: 0.9;
        }
        80% {
            transform: translate(450px, -30px) scale(0.6);
            opacity: 0.7;
        }
        100% {
            transform: translate(600px, 0) scale(0.3);
            opacity: 0;
        }
    }
}

/* Mobile - shorter dash */
@media (max-width: 767px) {
    @keyframes cartJumpDash {
        0% {
            transform: translate(0, 0) scale(1);
            opacity: 1;
        }
        20% {
            transform: translate(0, -50px) scale(1.2);
            opacity: 1;
        }
        40% {
            transform: translate(40px, -70px) scale(1.1);
            opacity: 1;
        }
        60% {
            transform: translate(100px, -50px) scale(0.9);
            opacity: 0.9;
        }
        80% {
            transform: translate(150px, -20px) scale(0.7);
            opacity: 0.7;
        }
        100% {
            transform: translate(200px, 0) scale(0.4);
            opacity: 0;
        }
    }
}

/* Cart dash for REMOVE action (reverse dash out) */
.cart-flyer.remove {
    color: #ff4444; /* Red for remove */
}

.cart-flyer.remove i {
    color: #ff4444;
}

@keyframes cartDashOut {
    0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
    }
    30% {
        transform: translate(-30px, -40px) scale(0.9); /* Jump back/up */
        opacity: 1;
    }
    60% {
        transform: translate(-150px, -20px) scale(0.7);
        opacity: 0.8;
    }
    100% {
        transform: translate(-300px, 0) scale(0.4);
        opacity: 0;
    }
}

.cart-flyer.dash-out {
    animation: cartDashOut 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.98) forwards;
}



    </style>
</head>
<body>
    <header class="header">
    <div class="container">
        <div class="header-content">
            <div class="logo"><a href="/"><img src="/assets/images/logos/tgz2.png" alt="My Favourites" class="header-logo"></a></div>
                <button class="nav-item share-btn" onclick="shareProduct()" title="Share this product">
                    <i class="fas fa-share-alt"></i>
                    <span>Share</span>
                </button>
                        <nav class="desktop-nav">
                            <a href="/" class="nav-item">
                                <i class="fas fa-home"></i>
                                <span>Home</span>
                            </a>
                            
                            <button class="nav-item" onclick="redirectToHomeWithSearch()">
                                <i class="fas fa-search"></i>
                                <span>Search</span>
                            </button>
                            
                            <a href="/favourites/" class="nav-item" style="position: relative;">
                                <i class="fas fa-heart"></i>
                                <span>Favourites</span>
                                <span class="favourites-count" style="display: none;">0</span>
                            </a>
                            <a href="/cart/" class="nav-item" style="position: relative;">
                                <i class="fas fa-shopping-bag"></i>
                                <span>Cart</span>
                                <span class="cart-count" style="display: none;">0</span>
                            </a>
                        </nav>
            
        </div>
    </div>
</header>

    <nav class="mobile-bottom-nav">
    <a href="/" class="nav-item"><i class="fas fa-home"></i><span>Home</span></a>
    <button class="nav-item" onclick="redirectToHomeWithSearch()"><i class="fas fa-search"></i><span>Search</span></button>
    
    <button type="button" class="nav-item" onclick="window.location.href='/favourites/'" style="position: relative;">
        <i class="fas fa-heart"></i>
        <span>Favourites</span>
        <span class="favourites-count" style="display: none;">0</span>
    </button>
    <a href="/cart/" class="nav-item" style="position: relative;">
        <i class="fas fa-shopping-bag"></i>
        <span>Cart</span>
        <span class="cart-count" style="display: none;">0</span>
    </a>
</nav>
    <main>
        <div class="product-details">
            <div class="container">
                <div class="product-content">
                    <!-- Hybrid Image Gallery -->
                    <div class="product-gallery">
                        <div class="gallery-container" id="galleryContainer">
                            <div class="gallery-slides" id="gallerySlides">
                                {% for image in product.mainImages %}
                                <div class="gallery-slide" data-index="{{ forloop.index0 }}">
                                    <img src="/assets/images/main/{{ image }}" 
                                    alt="{{ product.title }} - {{ product.material }} {{ product.category }} available at theGirlyZone Kampala" 
                                    loading="lazy">
                                </div>
                                {% endfor %}
                            </div>
                            <button class="gallery-arrow prev" onclick="changeSlide(-1)">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="gallery-arrow next" onclick="changeSlide(1)">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <div class="gallery-nav" id="galleryNav">
                            {% for image in product.mainImages %}
                            <button class="gallery-dot {% if forloop.first %}active{% endif %}" data-index="{{ forloop.index0 }}" onclick="goToSlide({{ forloop.index0 }})"></button>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Product Info -->
                    <div class="product-info-details">
                        <h1 id="productTitle">{{ product.title }}</h1>
                        <p class="product-price-details" id="productPrice">UGX {{ product.price | formatNumber }}</p>
                        <p class="product-description" id="productDescription">
                            {{ product.shortDescription }}
                        </p>

                        <!-- Color Selector -->
                        {% if product.colors.length > 0 %}
                        <div class="color-selector">
                            <h3>Color: <span id="selectedColor">{{ product.colors[0].name }}</span></h3>
                            <div class="color-options" id="colorOptions">
                                {% for color in product.colors %}
                                <div class="color-option {% if forloop.first %}active{% endif %} {% unless color.availability %}unavailable{% endunless %} {% if product.colors.length == 1 %}single-color{% endif %}" 
                                    style="background-color: {{ color.code }}"
                                    data-color-index="{{ forloop.index0 }}"
                                    data-color-name="{{ color.name }}"
                                    {% if color.availability and product.colors.length > 1 %}onclick="selectColor({{ forloop.index0 }})"{% endif %}>
                                    {% if product.colors.length == 1 %}
                                      {% endif %}
                                </div>
                                {% endfor %}
                                {% if product.colors.length > 1 %}
                                <button class="view-all-btn" id="viewAllBtn" onclick="resetToDefaultGallery()" style="display: none;">
                                    VIEW ALL
                                </button>
                                {% endif %}
                            </div>
                        </div>
                        {% endif %}

                        <!-- Action Buttons -->
<div class="product-actions-grid">
    <div class="buy-now-container">
        <button class="buy-now-btn" id="buyNowBtn" onclick="buyNowProduct()">
            <i class="fas fa-bolt"></i> BUY NOW
        </button>
    </div>
    <div class="add-to-cart-container">
        <button class="add-to-cart-btn" id="addToCartBtn" onclick="toggleCart()" title="Add to Cart">
            <i class="fas fa-cart-plus"></i>
        </button>
    </div>
</div>

<button class="add-to-favourites" id="favouriteBtn" onclick="toggleFavourite()">
    <i class="far fa-heart" id="favouriteIcon"></i> 
    <span id="favouriteButtonText">Add to Favourites</span>
</button>
                        <!-- Product Meta -->
                        <div class="product-meta">
                            <p><span class="meta-label">Category:</span> {{ product.category | capitalize }}</p>
                            <p><span class="meta-label">Mood:</span> {{ product.mood | join: ", " | capitalize }}</p>
                            <p><span class="meta-label">Occasion:</span> {{ product.occasion | join: ", " | capitalize }}</p>
                            <p><span class="meta-label">Material:</span> {{ product.material }}</p>
                            <p><span class="meta-label">Sizes:</span> {{ product.sizeRange | join: ", " | capitalize }}</p>
                            <p><span class="meta-label">Delivery:</span> Free within Kampala</p>
                            <p><span class="meta-label">Quality Guarantee:</span>Product is inspected before release.</p>
                        </div>
                    </div>
                </div>

                <!-- Recommendations -->
                <section class="recommendations-section">
                    <h2>You Might Also Like</h2>
                    <div class="recommendations-grid" id="recommendationsGrid">
                        <!-- Recommendations will be populated by JavaScript -->
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <footer class="footer">
    <div class="container">
        <!-- Company Slogan -->
        <div class="slogan-section">
            <p class="company-slogan">where style meets affordability</p>
        </div>
        
        <!-- Horizontal Divider -->
        <div class="footer-divider"></div>
        
        <!-- Copyright -->
        <div class="copyright-section">
            <p class="copyright-text">Â© All content on this <strong>website is owned by theGirlyZone and Marvin's DesignHouse</strong>, and protected by copyright law. Reproduction or distribution without permission may result in legal action.</p>
        </div>
    </div>
</footer>

<!-- ðŸŽ¯ MOBILE SCROLL HELPER (Only for mobile) -->
<div class="mobile-scroll-helper hidden" id="mobileScrollHelper" title="Scroll down for details">
    <i class="fas fa-chevron-down"></i>
    <span class="close-helper" onclick="closeScrollHelper()">Ã—</span>
</div>

<script>
        // Current product data
        const currentProduct = {{ product | json }};
        let currentSlide = 0;
        let currentColorIndex = 0;
        let touchStartX = 0;
        let touchEndX = 0;

        // Gallery Functions
        function updateGallery() {
            const slides = document.getElementById('gallerySlides');
            const dots = document.querySelectorAll('.gallery-dot');
            
            slides.style.transform = `translateX(-${currentSlide * 100}%)`;
            
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }

        function changeSlide(direction) {
            const totalSlides = currentProduct.mainImages.length;
            currentSlide = (currentSlide + direction + totalSlides) % totalSlides;
            updateGallery();
        }

        function goToSlide(index) {
            currentSlide = index;
            updateGallery();
        }

        // ðŸ†• UPDATE TOUCH HANDLERS FOR SINGLE IMAGE MODE
        function handleTouchStart(e) {
            const gallerySlides = document.getElementById('gallerySlides');
            
            // Only enable swipe for multi-image galleries
            if (!gallerySlides.classList.contains('single-image-mode')) {
                touchStartX = e.changedTouches[0].screenX;
            }
        }

        function handleTouchEnd(e) {
            const gallerySlides = document.getElementById('gallerySlides');
            
            // Only handle swipe for multi-image galleries
            if (!gallerySlides.classList.contains('single-image-mode')) {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }
        }

        function handleSwipe() {
            const gallerySlides = document.getElementById('gallerySlides');
            
            // Only handle swipe for multi-image galleries
            if (gallerySlides.classList.contains('single-image-mode')) {
                return; // Exit if in single image mode
            }
            
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    changeSlide(1); // Swipe left
                } else {
                    changeSlide(-1); // Swipe right
                }
            }
        }

        // ðŸŽ¯ ENHANCED COLOR SELECTION WITH CONDITIONAL VIEW ALL BUTTON
        function selectColor(colorIndex) {
            if (currentProduct.colors.length === 1) {
                return;
            }
            const colorOptions = document.querySelectorAll('.color-option');
            const selectedColor = currentProduct.colors[colorIndex];
            const viewAllBtn = document.getElementById('viewAllBtn');
            
            // Remove active class from all color options
            colorOptions.forEach(option => option.classList.remove('active'));
            
            // Add active class to selected color
            colorOptions[colorIndex].classList.add('active');
            
            // Update selected color text
            document.getElementById('selectedColor').textContent = selectedColor.name;
            currentColorIndex = colorIndex;

            // ðŸ†• ONLY SHOW VIEW ALL BUTTON FOR MULTI-COLOR PRODUCTS
            if (viewAllBtn && currentProduct.colors.length > 1) {
                viewAllBtn.style.display = 'flex';
            }
            
           
            
            // Update gallery with color-specific images
            updateGalleryForColor(selectedColor);
            
            // Auto-scroll to gallery
            autoScrollToGallery();
        }

        // ðŸ†• AUTO-SCROLL FUNCTION
        function autoScrollToGallery() {
            const galleryElement = document.querySelector('.product-gallery');
            const headerHeight = document.querySelector('.header').offsetHeight;
            
            if (galleryElement) {
                // Calculate position (considering sticky header)
                const galleryPosition = galleryElement.offsetTop - headerHeight - 20;
                
                // Smooth scroll to gallery
                window.scrollTo({
                    top: galleryPosition,
                    behavior: 'smooth'
                });
            }
        }

        function updateGalleryForColor(color) {
            const gallerySlides = document.getElementById('gallerySlides');
            const galleryContainer = document.getElementById('galleryContainer');
            const galleryNav = document.getElementById('galleryNav');
            const galleryArrows = document.querySelectorAll('.gallery-arrow');
            
            // Clear existing slides
            gallerySlides.innerHTML = '';
            
            // ðŸ†• ONLY USE THE FIRST IMAGE OF THE SELECTED COLOR
            const singleImage = color.mainImages[0];
            
            // Create single slide
            const slide = document.createElement('div');
            slide.className = 'gallery-slide';
            slide.setAttribute('data-index', 0);
            slide.innerHTML = `<img src="/assets/images/main/${singleImage}" alt="${currentProduct.title} - ${color.name}" loading="lazy">`;
            gallerySlides.appendChild(slide);
            
            // ðŸ†• HIDE NAVIGATION DOTS (since only one image)
            if (galleryNav) {
                galleryNav.style.display = 'none';
            }
            
            // ðŸ†• HIDE ARROW BUTTONS
            galleryArrows.forEach(arrow => {
                arrow.style.display = 'none';
            });
            
            // Reset slide index
            currentSlide = 0;
            updateGallery();
            
            // ðŸ†• ADD RUBBER BAND EFFECT CSS CLASS
            gallerySlides.classList.add('single-image-mode');
        }

        // Toast Notifications
        function showToast(message) {
            const toast = document.getElementById('toast');
            if (toast) {
                toast.textContent = message;
                toast.className = 'toast show';
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }
        }

        // Recommendations Engine
        function loadRecommendations() {
            const recommendationsGrid = document.getElementById('recommendationsGrid');
            
            // Get recommended products
            const recommendedProducts = getRecommendedProducts();
            
            if (recommendedProducts.length === 0) {
                recommendationsGrid.innerHTML = '<p>No recommendations available at the moment.</p>';
                return;
            }
            
            recommendationsGrid.innerHTML = recommendedProducts.map(product => `
                <div class="product-card">
                    <div class="product-image">
                        <a href="/product/${product.slug}/">
                            <img src="/assets/images/secondary/${product.secondaryImage}" 
                            alt="${product.title} - Women's Fashion at theGirlyZone Uganda" 
                            loading="lazy">
                        </a>
                        <!-- HEART BUTTON REMOVED FROM HERE -->
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">${product.title}</h3>
                        <p class="product-price">UGX ${product.price.toLocaleString()}</p>
                    </div>
                </div>
            `).join('');
        }

        function getRecommendedProducts() {
            // Priority 1: Manual recommendations
            if (currentProduct.recommendations && currentProduct.recommendations.length > 0) {
                return currentProduct.recommendations
                    .map(id => getProductById(id))
                    .filter(product => product && product.id !== currentProduct.id)
                    .slice(0, 4);
            }
            
            // Priority 2: Auto-generated from category/tags
            const sameCategory = products.filter(p => 
                p.category === currentProduct.category && 
                p.id !== currentProduct.id
            );
            
            const sameMood = products.filter(p => 
                p.mood.some(mood => currentProduct.mood.includes(mood)) && 
                p.id !== currentProduct.id
            );
            
            // Combine and deduplicate
            const allRecommendations = [...sameCategory, ...sameMood];
            const uniqueRecommendations = allRecommendations.filter((product, index, self) => 
                index === self.findIndex(p => p.id === product.id)
            );
            
            return uniqueRecommendations.slice(0, 4);
        }

        function getProductById(id) {
            return products.find(product => product.id === id);
        }

        // Global products array (would be populated from your data)
        const products = {{ products | json }};

       window.toggleCart = function() {
    // Get selected color data from the product page
    const selectedColorElement = document.getElementById('selectedColor');
    const activeColorOption = document.querySelector('.color-option.active');
    
    let selectedColor = null;
    let selectedColorIndex = null;
    
    if (activeColorOption) {
        selectedColor = activeColorOption.dataset.colorName;
        selectedColorIndex = parseInt(activeColorOption.dataset.colorIndex);
    }
    
    const product = {
        id: {{ product.id }},
        title: "{{ product.title | escape }}",
        price: {{ product.price }},
        image: "{{ product.secondaryImage | default: product.mainImages[0] }}",
        slug: "{{ product.slug }}",
        colors: {{ product.colors | json }},
        selectedColor: selectedColor,
        selectedColorIndex: selectedColorIndex
    };
    
    let cart = JSON.parse(localStorage.getItem('thegirlyzone_cart') || '[]');
    
    // Quick limit check
    if (cart.length >= 10 && !cart.some(item => item.id === product.id)) {
        showToast('Cart is full!');
        return;
    }
    
    const existingIndex = cart.findIndex(item => item.id === product.id);
    
    if (existingIndex > -1) {
        // REMOVE from cart - dash out left
        cart.splice(existingIndex, 1);
        showToast('Removed from cart');
        animateCartRemove(); // ðŸ›’ Dashes out left
        
    } else {
        // ADD to cart - jump up and dash right
        cart.push(product);
        showToast('Added to cart!');
        animateCartAdd(); // ðŸ›’ Jumps up and dashes right
    }
    
    localStorage.setItem('thegirlyzone_cart', JSON.stringify(cart));
    updateCartCount();
    syncButtonStates();
    
    // Dispatch event for tracking
    document.dispatchEvent(new Event('cartUpdated'));
};

    // ðŸŽ¯ BUY NOW FUNCTION - Immediate WhatsApp Checkout
window.buyNowProduct = function() {
    // Get selected color data from the product page
    const selectedColorElement = document.getElementById('selectedColor');
    const activeColorOption = document.querySelector('.color-option.active');
    
    let selectedColor = null;
    
    if (activeColorOption && activeColorOption.dataset.colorName) {
        selectedColor = activeColorOption.dataset.colorName;
    } else if (selectedColorElement) {
        selectedColor = selectedColorElement.textContent;
    }
    
    const product = {
        id: {{ product.id }},
        title: "{{ product.title | escape }}",
        price: {{ product.price }},
        slug: "{{ product.slug }}",
        selectedColor: selectedColor
    };
    
    // Format WhatsApp message for single product
    let message = "ðŸ›ï¸ *BUY NOW REQUEST* ðŸ›ï¸%0A%0A";
    message += "*Order Item:*%0A";
    message += `1. *${product.title}*%0A`;
    message += `   Price: UGX ${product.price.toLocaleString()}%0A`;
    
    if (product.selectedColor) {
        message += `   Color: ${product.selectedColor}%0A`;
    }
    
    message += `   Link: https://thegirlyzone.netlify.app/product/${product.slug}/%0A%0A`;
    message += `*TOTAL: UGX ${product.price.toLocaleString()}*%0A%0A`;
    message += "Thank you! ðŸŽ€";

    // WhatsApp API URL (using same number as cart)
    const phoneNumber = "256744868456";
    const whatsappUrl = `https://wa.me/${phoneNumber}?text=${message}`;
    
    // Open WhatsApp in new tab
    window.open(whatsappUrl, '_blank');
    
    // Track GA event
    if (typeof gtag !== 'undefined') {
        gtag('event', 'begin_checkout', {
            'items': [{
                'item_id': product.id,
                'item_name': product.title,
                'price': product.price,
                'quantity': 1
            }]
        });
    }
}


window.toggleFavourite = function() {
    const product = {
        id: {{ product.id }},
        title: "{{ product.title | escape }}",
        price: {{ product.price }},
        image: "{{ product.secondaryImage | default: product.mainImages[0] }}",
        slug: "{{ product.slug }}"
    };
    
    let favourites = JSON.parse(localStorage.getItem('thegirlyzone_favourites') || '[]');
    const existingIndex = favourites.findIndex(item => item.id === product.id);
    
    if (existingIndex > -1) {
        // ðŸ’” REMOVE - Simple broken heart that beats and fades
        favourites.splice(existingIndex, 1);
        showToast('Removed from favourites');
        expressSadness();  // Clean, elegant sadness
        
    } else {
        // ðŸ’– ADD - Celebration hearts
        favourites.push(product);
        showToast('Added to favourites!');
        celebrateFavouriteAdded();
    }
    
    localStorage.setItem('thegirlyzone_favourites', JSON.stringify(favourites));
    updateFavouritesCount();
    syncButtonStates();
    
    document.dispatchEvent(new Event('favouritesUpdated'));
}

        // SYNC BUTTON STATES WITH LOCALSTORAGE
        function syncButtonStates() {
            const productId = {{ product.id }};
            
            const cart = JSON.parse(localStorage.getItem('thegirlyzone_cart') || '[]');
            const favourites = JSON.parse(localStorage.getItem('thegirlyzone_favourites') || '[]');
            
            const isInCart = cart.some(item => item.id === productId);
            const isFavourite = favourites.some(item => item.id === productId);
            
            // ðŸŽ¯ SYNC CART BUTTON - Black by default, Green when in cart
const cartBtn = document.getElementById('addToCartBtn');
const buyNowBtn = document.getElementById('buyNowBtn');

if (cartBtn) {
    // Remove any inline background styles first
    cartBtn.style.background = '';
    
    // Add/remove class for cart state
    if (isInCart) {
        cartBtn.classList.add('in-cart');
        cartBtn.title = 'Remove from Cart';
    } else {
        cartBtn.classList.remove('in-cart');
        cartBtn.title = 'Add to Cart';
    }
    
    // Update disabled state based on availability
    const isAvailable = {{ product.availability | default: true }};
    cartBtn.disabled = !isAvailable;
    
    if (buyNowBtn) {
        buyNowBtn.disabled = !isAvailable;
        
        if (!isAvailable) {
            buyNowBtn.style.background = '#ccc';
        } else {
            buyNowBtn.style.background = ''; // Reset to default
        }
    }
    
    if (!isAvailable) {
        cartBtn.classList.remove('in-cart'); // Remove green color when out of stock
        cartBtn.title = 'Out of Stock';
    }
}
            
            
            // Sync Favourite Button
            const favBtn = document.getElementById('favouriteBtn');
            const favIcon = document.getElementById('favouriteIcon');
            const favText = document.getElementById('favouriteButtonText');

            if (favBtn && favIcon && favText) {
                if (isFavourite) {
                    favIcon.classList.remove('far');
                    favIcon.classList.add('fas');
                    favIcon.style.color = '#ff004d';
                    favText.textContent = 'Remove from Favourites';
                    favBtn.style.borderColor = '#ff004d';
                    favBtn.style.color = '#ff004d';
                    favBtn.style.background = 'white'; // Always white background
                } else {
                    favIcon.classList.remove('fas');
                    favIcon.classList.add('far');
                    favIcon.style.color = '#ff004d'; // Always red
                    favText.textContent = 'Add to Favourites';
                    favBtn.style.borderColor = '#ff004d'; // Always red
                    favBtn.style.color = '#ff004d'; // Always red
                    favBtn.style.background = 'white'; // Always white background
                }
            }
        }

        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('thegirlyzone_cart') || '[]');
            document.querySelectorAll('.cart-count').forEach(counter => {
                counter.textContent = cart.length;
                counter.style.display = cart.length > 0 ? 'inline' : 'none';
            });
        }

        function updateFavouritesCount() {
            const favourites = JSON.parse(localStorage.getItem('thegirlyzone_favourites') || '[]');
            document.querySelectorAll('.favourites-count').forEach(counter => {
                counter.textContent = favourites.length;
                counter.style.display = favourites.length > 0 ? 'inline' : 'none';
            });
        }

        // Enhanced Share Product Functionality
        function shareProduct() {
            const productUrl = window.location.href;
            const productTitle = document.getElementById('productTitle').textContent;
            
            createShareModal(productUrl, productTitle);
        }

        // Pre-created modal HTML template for better performance
        let shareModalTemplate = null;

        function createShareModal(url, title) {
            // Create template once and reuse
            if (!shareModalTemplate) {
                shareModalTemplate = document.createElement('div');
                shareModalTemplate.className = 'share-modal-overlay';
                shareModalTemplate.innerHTML = `
                    <div class="share-modal-content">
                        <div style="margin-bottom: 1.5rem;">
                            <h3 style="margin: 0 0 0.5rem 0; color: #000; font-size: 1.3rem; font-weight: 600;">Share this product</h3>
                            <p style="margin: 0; color: #666; font-size: 0.9rem;">Spread the love! Share with friends</p>
                        </div>
                        
                        <div class="share-platforms">
                            <button class="share-platform-btn whatsapp-btn" data-platform="whatsapp">
                                <i class="fab fa-whatsapp" style="font-size: 1.5rem;"></i>
                                <span>WhatsApp</span>
                            </button>
                            
                            <button class="share-platform-btn facebook-btn" data-platform="facebook">
                                <i class="fab fa-facebook" style="font-size: 1.5rem;"></i>
                                <span>Facebook</span>
                            </button>
                            
                            <button class="share-platform-btn twitter-btn" data-platform="twitter">
                                <i class="fab fa-twitter" style="font-size: 1.5rem;"></i>
                                <span>Twitter</span>
                            </button>
                            
                            <button class="share-platform-btn email-btn" data-platform="email">
                                <i class="fas fa-envelope" style="font-size: 1.5rem;"></i>
                                <span>Email</span>
                            </button>
                        </div>
                        
                        <div style="background: #f8f9fa; border-radius: 12px; padding: 1rem; margin-bottom: 1.5rem;">
                            <p style="margin: 0 0 0.5rem 0; color: #666; font-size: 0.8rem; font-weight: 500;">Or copy product link</p>
                            <button class="copy-link-btn">
                                ðŸ“‹ Copy Link
                            </button>
                        </div>
                        
                        <button class="close-modal-btn">
                            Close
                        </button>
                    </div>
                `;
            }
            
            // Clone the template
            const modal = shareModalTemplate.cloneNode(true);
            
            // Add event listeners
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeShareModal();
                }
            });
            
            modal.querySelectorAll('.share-platform-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const platform = this.getAttribute('data-platform');
                    shareToPlatform(platform, url, title);
                });
            });
            
            modal.querySelector('.copy-link-btn').addEventListener('click', function() {
                copyProductLink(url);
            });
            
            modal.querySelector('.close-modal-btn').addEventListener('click', closeShareModal);
            
            document.body.appendChild(modal);
            
            // Trigger animation
            requestAnimationFrame(() => {
                modal.classList.add('active');
            });
        }

        function shareToPlatform(platform, url, title) {
            let shareUrl = '';
            const encodedUrl = encodeURIComponent(url);
            const encodedTitle = encodeURIComponent(title);
            const encodedText = encodeURIComponent(`Check out ${title} on theGirlyZone Uganda!`);
            
            switch(platform) {
                case 'whatsapp':
                    shareUrl = `https://wa.me/?text=${encodedText}%20${encodedUrl}`;
                    break;
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}&quote=${encodedText}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?text=${encodedText}&url=${encodedUrl}`;
                    break;
                case 'email':
                    shareUrl = `mailto:?subject=${encodedTitle}&body=${encodedText}%0A%0A${encodedUrl}`;
                    break;
            }
            
            closeShareModal();
            
            if (platform === 'email') {
                window.location.href = shareUrl;
            } else {
                window.open(shareUrl, '_blank', 'width=600,height=400');
            }
        }

        function copyProductLink(url) {
            copyToClipboard(url);
            closeShareModal();
        }

        function closeShareModal() {
            const modal = document.querySelector('.share-modal-overlay');
            if (modal) {
                modal.classList.remove('active');
                setTimeout(() => {
                    if (modal.parentNode) {
                        modal.parentNode.removeChild(modal);
                    }
                }, 300);
            }
        }

        // Keep your existing clipboard functions
        function copyToClipboard(text) {
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text)
                    .then(() => {
                        showToast('Product link copied!');
                    })
                    .catch(() => {
                        fallbackCopyToClipboard(text);
                    });
            } else {
                fallbackCopyToClipboard(text);
            }
        }

        function fallbackCopyToClipboard(text) {
            const tempInput = document.createElement('input');
            tempInput.value = text;
            document.body.appendChild(tempInput);
            tempInput.select();
            tempInput.setSelectionRange(0, 99999);
            document.execCommand('copy');
            document.body.removeChild(tempInput);
            showToast('Product link copied!');
        }

       // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            // Add touch event listeners for mobile swipe
            const galleryContainer = document.getElementById('galleryContainer');
            if (galleryContainer) {
                galleryContainer.addEventListener('touchstart', handleTouchStart, false);
                galleryContainer.addEventListener('touchend', handleTouchEnd, false);
            }

            // AUTO-COLOR SELECTION ON PAGE LOAD
            const productSlug = '{{ product.slug }}';
            const storedColorIndex = sessionStorage.getItem(`product_${productSlug}_color`);
            
            if (storedColorIndex !== null) {
                // Auto-select the color
                selectColor(parseInt(storedColorIndex));
                
                // Clear the stored data
                sessionStorage.removeItem(`product_${productSlug}_color`);
            } else {
                // ðŸ†• ENSURE VIEW ALL BUTTON IS HIDDEN ON INITIAL PAGE LOAD
                const viewAllBtn = document.getElementById('viewAllBtn');
                if (viewAllBtn) {
                    viewAllBtn.style.display = 'none';
                }
            }
            
            // Load recommendations
            loadRecommendations();
            
            // Add keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowLeft') changeSlide(-1);
                if (e.key === 'ArrowRight') changeSlide(1);
            });
            
            // Initialize button states
            syncButtonStates();
            updateCartCount();
            updateFavouritesCount();
            
            console.log('Product page loaded - buttons should work now!');
        });

        // Mobile detection
        function checkMobile() {
    const mobileBtn = document.querySelector('.mobile-only');
    
          if (mobileBtn) {
              if (window.innerWidth < 768) {
                  mobileBtn.style.display = 'block';
              } else {
                  mobileBtn.style.display = 'none';
              }
          }
      }

        // Navigation functions (placeholder)
        function openCategories() {
            window.location.href = '/?filter=open';
        }

        function openSearch() {
            window.location.href = '/search/';
        }

        window.addEventListener('resize', checkMobile);
        checkMobile();

        // Search redirect function for product pages
        function redirectToHomeWithSearch() {
            // Save search state to open panel on homepage
            localStorage.setItem('autoOpenSearch', 'true');
            // Redirect to homepage
            window.location.href = '/';
        }

        // ðŸ†• RESET TO MULTI-IMAGE GALLERY (if needed later)
        function resetToMultiImageGallery() {
            const gallerySlides = document.getElementById('gallerySlides');
            const galleryNav = document.getElementById('galleryNav');
            const galleryArrows = document.querySelectorAll('.gallery-arrow');
            
            // Remove single image mode
            gallerySlides.classList.remove('single-image-mode');
            
            // Show navigation
            if (galleryNav) {
                galleryNav.style.display = 'flex';
            }
            
            // Show arrows
            galleryArrows.forEach(arrow => {
                arrow.style.display = 'flex';
            });
            
            // Reset to original product images
            const originalProduct = currentProduct;
            updateGalleryForProduct(originalProduct);
        }

        // ðŸŽ¯ RESET TO DEFAULT GALLERY (VIEW ALL)
function resetToDefaultGallery() {
    const gallerySlides = document.getElementById('gallerySlides');
    const galleryContainer = document.getElementById('galleryContainer');
    const galleryNav = document.getElementById('galleryNav');
    const galleryArrows = document.querySelectorAll('.gallery-arrow');
    const colorOptions = document.querySelectorAll('.color-option');
    const viewAllBtn = document.getElementById('viewAllBtn');
    
    console.log('Resetting to default gallery...');
    
    // ðŸ†• HIDE VIEW ALL BUTTON (since we're returning to default)
    if (viewAllBtn && currentProduct.colors.length > 1) {
        viewAllBtn.style.display = 'none';
    }
    
    // Remove single image mode
    if (gallerySlides) {
        gallerySlides.classList.remove('single-image-mode');
    }
    
    // Show navigation dots
    if (galleryNav) {
        galleryNav.style.display = 'flex';
    }
    
    // Show arrow buttons
    galleryArrows.forEach(arrow => {
        arrow.style.display = 'flex';
    });
    
    // Reset to first color as active
    colorOptions.forEach(option => option.classList.remove('active'));
    if (colorOptions[0]) {
        colorOptions[0].classList.add('active');
    }
    
    // Reset selected color text
    const defaultColorName = "{{ product.colors[0].name }}";
    document.getElementById('selectedColor').textContent = defaultColorName;
    currentColorIndex = 0;
    
    // Reload original product images
    if (gallerySlides) {
        gallerySlides.innerHTML = '';
        
        const originalImages = currentProduct.mainImages;
        
        originalImages.forEach((image, index) => {
            const slide = document.createElement('div');
            slide.className = 'gallery-slide';
            slide.setAttribute('data-index', index);
            slide.innerHTML = `<img src="/assets/images/main/${image}" alt="${currentProduct.title} - Image ${index + 1}" loading="lazy">`;
            gallerySlides.appendChild(slide);
        });
    }
    
    // Reset navigation dots
    if (galleryNav) {
        galleryNav.innerHTML = '';
        
        const originalImages = currentProduct.mainImages;
        originalImages.forEach((_, index) => {
            const dot = document.createElement('button');
            dot.className = `gallery-dot ${index === 0 ? 'active' : ''}`;
            dot.setAttribute('data-index', index);
            dot.onclick = () => goToSlide(index);
            galleryNav.appendChild(dot);
        });
    }
    
    // Reset slide index and update
    currentSlide = 0;
    updateGallery();
    
    // Scroll back to gallery
    autoScrollToGallery();
    
    // Show success feedback
    showToast('Showing all product images!');
}
// ðŸŽ¯ MOBILE SCROLL HELPER FUNCTIONALITY
document.addEventListener('DOMContentLoaded', function() {
    const scrollHelper = document.getElementById('mobileScrollHelper');
    
    // Only run on mobile screens
    if (window.innerWidth <= 767 && scrollHelper) {
        let lastScrollTop = 0;
        let lastScrollLeft = 0;
        let hasScrolledVertically = false;
        let hasInteracted = false;
        
        // Show helper after a short delay (when page loads)
        setTimeout(() => {
            scrollHelper.classList.remove('hidden');
            scrollHelper.classList.add('visible');
        }, 1000);
        
        // Helper function to scroll page up by 1cm (â‰ˆ38px)
        function scrollPageUp() {
            const currentScroll = window.pageYOffset || document.documentElement.scrollTop;
            const scrollAmount = 38; // Approximately 1cm on mobile
            
            window.scrollTo({
                top: Math.max(0, currentScroll - scrollAmount),
                behavior: 'smooth'
            });
            
            // Hide the helper after scrolling
            hideScrollHelper();
        }
        
        // Function to hide the helper
        function hideScrollHelper() {
            scrollHelper.classList.remove('visible');
            scrollHelper.classList.add('hidden');
            hasInteracted = true;
        }
        
        // Function to close the helper when X is clicked
        window.closeScrollHelper = function() {
            hideScrollHelper();
        }
        
        // Add click event to scroll helper
        scrollHelper.addEventListener('click', function(e) {
            // Don't trigger if clicking the close button
            if (e.target.classList.contains('close-helper')) {
                return;
            }
            scrollPageUp();
        });
        
        // Track scroll events
        window.addEventListener('scroll', function() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;
            
            // Check if user is scrolling vertically
            if (Math.abs(scrollTop - lastScrollTop) > 5) {
                hasScrolledVertically = true;
                
                // Hide helper when user scrolls vertically (but only if not already interacted)
                if (!hasInteracted && scrollHelper.classList.contains('visible')) {
                    hideScrollHelper();
                }
            }
            
            // Keep helper visible when scrolling horizontally
            if (Math.abs(scrollLeft - lastScrollLeft) > 5) {
                hasScrolledVertically = false;
            }
            
            lastScrollTop = scrollTop;
            lastScrollLeft = scrollLeft;
        });
        
        // Touch events for mobile
        let touchStartY = 0;
        let touchStartX = 0;
        
        document.addEventListener('touchstart', function(e) {
            touchStartY = e.touches[0].clientY;
            touchStartX = e.touches[0].clientX;
        }, { passive: true });
        
        document.addEventListener('touchend', function(e) {
            if (!scrollHelper || !scrollHelper.classList.contains('visible')) return;
            
            const touchEndY = e.changedTouches[0].clientY;
            const touchEndX = e.changedTouches[0].clientX;
            
            const deltaY = Math.abs(touchEndY - touchStartY);
            const deltaX = Math.abs(touchEndX - touchStartX);
            
            // If vertical swipe is more significant than horizontal
            if (deltaY > deltaX && deltaY > 10) {
                hasScrolledVertically = true;
                if (!hasInteracted) {
                    hideScrollHelper();
                }
            }
        }, { passive: true });
        
        // Hide helper when user interacts with buy now or cart buttons
        const actionButtons = document.querySelectorAll('.buy-now-btn, .add-to-cart-btn, .mobile-buy-now-btn, .add-to-favourites');
        actionButtons.forEach(button => {
            button.addEventListener('click', function() {
                if (scrollHelper.classList.contains('visible')) {
                    hideScrollHelper();
                }
            });
        });
        
        // Also hide when user taps anywhere on the product gallery
        const gallery = document.querySelector('.product-gallery');
        if (gallery) {
            gallery.addEventListener('click', function() {
                if (scrollHelper.classList.contains('visible')) {
                    hideScrollHelper();
                }
            });
        }
        
        // Auto-hide after 10 seconds if user hasn't interacted
        setTimeout(() => {
            if (scrollHelper.classList.contains('visible') && !hasInteracted) {
                hideScrollHelper();
            }
        }, 10000);
    }
});


// ðŸŽ¯ FAVOURITES ANIMATIONS - Joy & Sadness Engine (NO EMOJIS)
function celebrateFavouriteAdded() {
    // Create container if it doesn't exist
    let container = document.querySelector('.favourites-animation-container');
    if (!container) {
        container = document.createElement('div');
        container.className = 'favourites-animation-container';
        document.body.appendChild(container);
    }
    
    // Create 12-15 hearts for a nice burst
    const heartCount = window.innerWidth < 768 ? 10 : 15;
    
    for (let i = 0; i < heartCount; i++) {
        setTimeout(() => {
            createHeart(container);
        }, i * 50);
    }
    
    // Auto-remove container after animation
    setTimeout(() => {
        if (container && container.children.length === 0) {
            container.remove();
        }
    }, 3000);
}

function createHeart(container) {
    const heart = document.createElement('div');
    heart.className = 'heart-joy';
    
    // Random size variation
    const sizeRand = Math.random();
    if (sizeRand < 0.3) {
        heart.classList.add('large');
    } else if (sizeRand < 0.6) {
        heart.classList.add('small');
    } else if (sizeRand < 0.8) {
        heart.classList.add('tiny');
    }
    
    // Use Font Awesome heart icons - 100% reliable
    const heartType = Math.random();
    if (heartType < 0.4) {
        heart.innerHTML = '<i class="fas fa-heart"></i>';      // Solid red
    } else if (heartType < 0.7) {
        heart.innerHTML = '<i class="fas fa-heartbeat"></i>'; // Heartbeat
    } else {
        heart.innerHTML = '<i class="fas fa-star"></i>';      // Sparkle star
    }
    
    // Position - start near the favourites button
    const favButton = document.getElementById('favouriteBtn');
    let startX, startY;
    
    if (favButton) {
        const rect = favButton.getBoundingClientRect();
        startX = rect.left + rect.width / 2;
        startY = rect.top;
    } else {
        startX = window.innerWidth / 2;
        startY = window.innerHeight / 2;
    }
    
    // Add random offset
    const xOffset = (Math.random() - 0.5) * 150;
    const yOffset = (Math.random() - 0.5) * 50;
    
    heart.style.left = `${startX + xOffset}px`;
    heart.style.top = `${startY + yOffset}px`;
    
    container.appendChild(heart);
    
    // Remove heart after animation
    setTimeout(() => {
        if (heart.parentNode) {
            heart.remove();
        }
    }, 2500);
}

// ðŸ’” SADNESS ANIMATION - CSS Drawn Broken Heart (Most reliable)
function expressSadness() {
    // Remove any existing sadness animations
    const existingSadness = document.querySelector('.sadness-container');
    if (existingSadness) {
        existingSadness.remove();
    }
    
    // Create sadness container with CSS heart + tears
    const sadnessContainer = document.createElement('div');
    sadnessContainer.className = 'sadness-container';
    
    sadnessContainer.innerHTML = `
        <div class="heart-sad">
            <div class="heart-left"></div>
            <div class="heart-right"></div>
            <div class="heart-crack"></div>
            <div class="tear tear-1"></div>
            <div class="tear tear-2"></div>
            <div class="tear tear-3"></div>
        </div>
        <div class="sadness-message">
            <i class="fas fa-heart-broken"></i> Removed from favourites
        </div>
    `;
    
    document.body.appendChild(sadnessContainer);
    
    // Remove after animation
    setTimeout(() => {
        if (sadnessContainer.parentNode) {
            sadnessContainer.remove();
        }
    }, 2000);
}

// ðŸ’” ALTERNATIVE: Font Awesome broken heart version
function expressSadnessFA() {
    const existingSadness = document.querySelector('.sadness-container');
    if (existingSadness) {
        existingSadness.remove();
    }
    
    const sadnessContainer = document.createElement('div');
    sadnessContainer.className = 'sadness-container';
    
    sadnessContainer.innerHTML = `
        <div class="heart-sad-fa">
            <i class="fas fa-heart-broken"></i>
            <i class="fas fa-tint fa-tear" style="top: 30px; left: 35px;"></i>
            <i class="fas fa-tint fa-tear" style="top: 40px; left: 50px; animation-delay: 0.3s;"></i>
            <i class="fas fa-tint fa-tear" style="top: 35px; left: 65px; animation-delay: 0.6s;"></i>
        </div>
        <div class="sadness-message">
            <i class="fas fa-heart-broken"></i> Removed
        </div>
    `;
    
    document.body.appendChild(sadnessContainer);
    
    setTimeout(() => {
        if (sadnessContainer.parentNode) {
            sadnessContainer.remove();
        }
    }, 2000);
}

// ðŸ’” SADNESS ANIMATION - One grey beat, then fade
function expressSadness() {
    // Remove any existing sadness animations
    const existingSadness = document.querySelector('.sadness-container');
    if (existingSadness) {
        existingSadness.remove();
    }
    
    // Create sadness container with grey broken heart
    const sadnessContainer = document.createElement('div');
    sadnessContainer.className = 'sadness-container';
    
    sadnessContainer.innerHTML = `
        <div class="heart-sad">
            <i class="fas fa-heart-broken"></i>
        </div>
    `;
    
    document.body.appendChild(sadnessContainer);
    
    // Remove after animation
    setTimeout(() => {
        if (sadnessContainer.parentNode) {
            sadnessContainer.remove();
        }
    }, 1800);
}

// ðŸ›’ CART ANIMATION - Jump up and dash right
function animateCartAdd() {
    // Get the add to cart button position
    const cartBtn = document.getElementById('addToCartBtn');
    if (!cartBtn) return;
    
    const rect = cartBtn.getBoundingClientRect();
    const startX = rect.left + rect.width / 2;
    const startY = rect.top + rect.height / 2;
    
    // Create container if it doesn't exist
    let container = document.querySelector('.cart-animation-container');
    if (!container) {
        container = document.createElement('div');
        container.className = 'cart-animation-container';
        document.body.appendChild(container);
    }
    
    // Create flying cart
    const cart = document.createElement('div');
    cart.className = 'cart-flyer added';
    
    // Use shopping bag icon (cart)
    cart.innerHTML = '<i class="fas fa-shopping-bag"></i>';
    
    cart.style.left = `${startX}px`;
    cart.style.top = `${startY}px`;
    
    container.appendChild(cart);
    
    // Remove after animation
    setTimeout(() => {
        if (cart.parentNode) {
            cart.remove();
        }
        
        // Clean up container if empty
        if (container.children.length === 0) {
            container.remove();
        }
    }, 800);
}

// ðŸ›’ CART ANIMATION - Remove from cart (dash out left)
function animateCartRemove() {
    const cartBtn = document.getElementById('addToCartBtn');
    if (!cartBtn) return;
    
    const rect = cartBtn.getBoundingClientRect();
    const startX = rect.left + rect.width / 2;
    const startY = rect.top + rect.height / 2;
    
    let container = document.querySelector('.cart-animation-container');
    if (!container) {
        container = document.createElement('div');
        container.className = 'cart-animation-container';
        document.body.appendChild(container);
    }
    
    const cart = document.createElement('div');
    cart.className = 'cart-flyer remove dash-out';
    cart.innerHTML = '<i class="fas fa-shopping-bag"></i>';
    
    cart.style.left = `${startX}px`;
    cart.style.top = `${startY}px`;
    
    container.appendChild(cart);
    
    setTimeout(() => {
        if (cart.parentNode) {
            cart.remove();
        }
        if (container.children.length === 0) {
            container.remove();
        }
    }, 700);
}
</script>
<script src="/assets/js/cart-favourites.js"></script>
</body>
</html>